var KISSY=(function(undefined){var host=this,S,guid=0,EMPTY="";function getLogger(logger){var obj={};for(var cat in loggerLevel){(function(obj,cat){obj[cat]=function(msg){return S.log(msg,cat,logger)}})(obj,cat)}return obj}var loggerLevel={"debug":10,"info":20,"warn":30,"error":40};S={__BUILD_TIME:"20131209235315",Env:{host:host},Config:{debug:"@DEBUG@",fns:{}},version:"1.41",config:function(configName,configValue){var cfg,r,self=this,fn,Config=S.Config,configFns=Config.fns;if(S.isObject(configName)){S.each(configName,function(configValue,p){fn=configFns[p];if(fn){fn.call(self,configValue)}else{Config[p]=configValue}})}else{cfg=configFns[configName];if(configValue===undefined){if(cfg){r=cfg.call(self)}else{r=Config[configName]}}else{if(cfg){r=cfg.call(self,configValue)}else{Config[configName]=configValue}}}return r},log:function(msg,cat,logger){if("@DEBUG@"){var matched=1;if(logger){var loggerCfg=S.Config.logger||{},list,i,l,level,minLevel,maxLevel,reg;cat=cat||"debug";level=loggerLevel[cat]||loggerLevel.debug;if((list=loggerCfg.includes)){matched=0;for(i=0;i<list.length;i++){l=list[i];reg=l.logger;maxLevel=loggerLevel[l.maxLevel]||loggerLevel.error;minLevel=loggerLevel[l.minLevel]||loggerLevel.debug;if(minLevel<=level&&maxLevel>=level&&logger.match(reg)){matched=1;break}}}else{if((list=loggerCfg.excludes)){matched=1;for(i=0;i<list.length;i++){l=list[i];reg=l.logger;maxLevel=loggerLevel[l.maxLevel]||loggerLevel.error;minLevel=loggerLevel[l.minLevel]||loggerLevel.debug;if(minLevel<=level&&maxLevel>=level&&logger.match(reg)){matched=0;break}}}}if(matched){msg=logger+": "+msg}}if(typeof console!=="undefined"&&console.log&&matched){console[cat&&console[cat]?cat:"log"](msg);return msg}}return undefined},"getLogger":function(logger){return getLogger(logger)},error:function(msg){if("@DEBUG@"){throw msg instanceof Error?msg:new Error(msg)}},guid:function(pre){return(pre||EMPTY)+guid++}};if("@DEBUG@"){S.Config.logger={excludes:[{logger:/^s\/.*/,maxLevel:"info",minLevel:"debug"}]}}S.Logger={};S.Logger.Level={"DEBUG":"debug",INFO:"info",WARN:"warn",ERROR:"error"};return S})();(function(S,undefined){var logger=S.getLogger("s/lang");var MIX_CIRCULAR_DETECTION="__MIX_CIRCULAR",STAMP_MARKER="__~ks_stamped",host=this,TRUE=true,EMPTY="",Obj=Object,objectCreate=Obj.create,hasEnumBug=!({toString:1}.propertyIsEnumerable("toString")),enumProperties=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];mix(S,{stamp:function(o,readOnly,marker){marker=marker||STAMP_MARKER;var guid=o[marker];if(guid){return guid}else{if(!readOnly){try{guid=o[marker]=S.guid(marker)}catch(e){guid=undefined}}}return guid},keys:Obj.keys||function(o){var result=[],p,i;for(p in o){if(o.hasOwnProperty(p)){result.push(p)}}if(hasEnumBug){for(i=enumProperties.length-1;i>=0;i--){p=enumProperties[i];if(o.hasOwnProperty(p)){result.push(p)}}}return result},mix:function(r,s,ov,wl,deep){if(typeof ov==="object"){wl=ov.whitelist;deep=ov.deep;ov=ov.overwrite}if(wl&&(typeof wl!=="function")){var originalWl=wl;wl=function(name,val){return S.inArray(name,originalWl)?val:undefined}}if(ov===undefined){ov=TRUE}var cache=[],c,i=0;mixInternal(r,s,ov,wl,deep,cache);while((c=cache[i++])){delete c[MIX_CIRCULAR_DETECTION]}return r},merge:function(varArgs){varArgs=S.makeArray(arguments);var o={},i,l=varArgs.length;for(i=0;i<l;i++){S.mix(o,varArgs[i])}return o},augment:function(r,varArgs){var args=S.makeArray(arguments),len=args.length-2,i=1,proto,arg,ov=args[len],wl=args[len+1];args[1]=varArgs;if(!S.isArray(wl)){ov=wl;wl=undefined;len++}if(typeof ov!=="boolean"){ov=undefined;len++}for(;i<len;i++){arg=args[i];if((proto=arg.prototype)){arg=S.mix({},proto,true,removeConstructor)}S.mix(r.prototype,arg,ov,wl)}return r},extend:function(r,s,px,sx){if("@DEBUG@"){if(!r){logger.error("extend r is null")}if(!s){logger.error("extend s is null")}if(!s||!r){return r}}var sp=s.prototype,rp;sp.constructor=s;rp=createObject(sp,r);r.prototype=S.mix(rp,r.prototype);r.superclass=sp;if(px){S.mix(rp,px)}if(sx){S.mix(r,sx)}return r},namespace:function(){var args=S.makeArray(arguments),l=args.length,o=null,i,j,p,global=(args[l-1]===TRUE&&l--);for(i=0;i<l;i++){p=(EMPTY+args[i]).split(".");o=global?host:this;for(j=(host[p[0]]===o)?1:0;j<p.length;++j){o=o[p[j]]=o[p[j]]||{}}}return o}});function Empty(){}function createObject(proto,constructor){var newProto;if(objectCreate){newProto=objectCreate(proto)}else{Empty.prototype=proto;newProto=new Empty()}newProto.constructor=constructor;return newProto}function mix(r,s){for(var i in s){r[i]=s[i]}}function mixInternal(r,s,ov,wl,deep,cache){if(!s||!r){return r}var i,p,keys,len;s[MIX_CIRCULAR_DETECTION]=r;cache.push(s);keys=S.keys(s);len=keys.length;for(i=0;i<len;i++){p=keys[i];if(p!==MIX_CIRCULAR_DETECTION){_mix(p,r,s,ov,wl,deep,cache)}}return r}function removeConstructor(k,v){return k==="constructor"?undefined:v}function _mix(p,r,s,ov,wl,deep,cache){if(ov||!(p in r)||deep){var target=r[p],src=s[p];if(target===src){if(target===undefined){r[p]=target
}return}if(wl){src=wl.call(s,p,src)}if(deep&&src&&(S.isArray(src)||S.isPlainObject(src))){if(src[MIX_CIRCULAR_DETECTION]){r[p]=src[MIX_CIRCULAR_DETECTION]}else{var clone=target&&(S.isArray(target)||S.isPlainObject(target))?target:(S.isArray(src)?[]:{});r[p]=clone;mixInternal(clone,src,ov,wl,TRUE,cache)}}else{if(src!==undefined&&(ov||!(p in r))){r[p]=src}}}}})(KISSY);(function(S,undefined){var TRUE=true,AP=Array.prototype,indexOf=AP.indexOf,lastIndexOf=AP.lastIndexOf,filter=AP.filter,every=AP.every,some=AP.some,map=AP.map,FALSE=false;S.mix(S,{each:function(object,fn,context){if(object){var key,val,keys,i=0,length=object&&object.length,isObj=length===undefined||S.type(object)==="function";context=context||null;if(isObj){keys=S.keys(object);for(;i<keys.length;i++){key=keys[i];if(fn.call(context,object[key],key,object)===FALSE){break}}}else{for(val=object[0];i<length;val=object[++i]){if(fn.call(context,val,i,object)===FALSE){break}}}}return object},indexOf:indexOf?function(item,arr){return indexOf.call(arr,item)}:function(item,arr){for(var i=0,len=arr.length;i<len;++i){if(arr[i]===item){return i}}return -1},lastIndexOf:(lastIndexOf)?function(item,arr){return lastIndexOf.call(arr,item)}:function(item,arr){for(var i=arr.length-1;i>=0;i--){if(arr[i]===item){break}}return i},unique:function(a,override){var b=a.slice();if(override){b.reverse()}var i=0,n,item;while(i<b.length){item=b[i];while((n=S.lastIndexOf(item,b))!==i){b.splice(n,1)}i+=1}if(override){b.reverse()}return b},inArray:function(item,arr){return S.indexOf(item,arr)>-1},filter:filter?function(arr,fn,context){return filter.call(arr,fn,context||this)}:function(arr,fn,context){var ret=[];S.each(arr,function(item,i,arr){if(fn.call(context||this,item,i,arr)){ret.push(item)}});return ret},map:map?function(arr,fn,context){return map.call(arr,fn,context||this)}:function(arr,fn,context){var len=arr.length,res=new Array(len);for(var i=0;i<len;i++){var el=typeof arr==="string"?arr.charAt(i):arr[i];if(el||i in arr){res[i]=fn.call(context||this,el,i,arr)}}return res},reduce:function(arr,callback,initialValue){var len=arr.length;if(typeof callback!=="function"){throw new TypeError("callback is not function!")}if(len===0&&arguments.length===2){throw new TypeError("arguments invalid")}var k=0;var accumulator;if(arguments.length>=3){accumulator=initialValue}else{do{if(k in arr){accumulator=arr[k++];break}k+=1;if(k>=len){throw new TypeError()}}while(TRUE)}while(k<len){if(k in arr){accumulator=callback.call(undefined,accumulator,arr[k],k,arr)}k++}return accumulator},every:every?function(arr,fn,context){return every.call(arr,fn,context||this)}:function(arr,fn,context){var len=arr&&arr.length||0;for(var i=0;i<len;i++){if(i in arr&&!fn.call(context,arr[i],i,arr)){return FALSE}}return TRUE},some:some?function(arr,fn,context){return some.call(arr,fn,context||this)}:function(arr,fn,context){var len=arr&&arr.length||0;for(var i=0;i<len;i++){if(i in arr&&fn.call(context,arr[i],i,arr)){return TRUE}}return FALSE},makeArray:function(o){if(o==null){return[]}if(S.isArray(o)){return o}var lengthType=typeof o.length,oType=typeof o;if(lengthType!=="number"||o.alert||oType==="string"||(oType==="function"&&!("item" in o&&lengthType==="number"))){return[o]}var ret=[];for(var i=0,l=o.length;i<l;i++){ret[i]=o[i]}return ret}})})(KISSY);(function(S,undefined){var logger=S.getLogger("s/lang");var SEP="&",EMPTY="",EQ="=",TRUE=true,HEX_BASE=16,htmlEntities={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},reverseEntities={},escapeReg,unEscapeReg,escapeRegExp=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;(function(){for(var k in htmlEntities){reverseEntities[htmlEntities[k]]=k}})();function isValidParamValue(val){var t=typeof val;return val==null||(t!=="object"&&t!=="function")}function getEscapeReg(){if(escapeReg){return escapeReg}var str=EMPTY;S.each(htmlEntities,function(entity){str+=entity+"|"});str=str.slice(0,-1);escapeReg=new RegExp(str,"g");return escapeReg}function getUnEscapeReg(){if(unEscapeReg){return unEscapeReg}var str=EMPTY;S.each(reverseEntities,function(entity){str+=entity+"|"});str+="&#(\\d{1,5});";unEscapeReg=new RegExp(str,"g");return unEscapeReg}S.mix(S,{urlEncode:function(s){return encodeURIComponent(String(s))},urlDecode:function(s){return decodeURIComponent(s.replace(/\+/g," "))},fromUnicode:function(str){return str.replace(/\\u([a-f\d]{4})/ig,function(m,u){return String.fromCharCode(parseInt(u,HEX_BASE))})},escapeHtml:function(str){return(str+"").replace(getEscapeReg(),function(m){return reverseEntities[m]})},escapeRegExp:function(str){return str.replace(escapeRegExp,"\\$&")},unEscapeHtml:function(str){return str.replace(getUnEscapeReg(),function(m,n){return htmlEntities[m]||String.fromCharCode(+n)})},param:function(o,sep,eq,serializeArray){sep=sep||SEP;eq=eq||EQ;if(serializeArray===undefined){serializeArray=TRUE}var buf=[],key,i,v,len,val,encode=S.urlEncode;for(key in o){val=o[key];key=encode(key);if(isValidParamValue(val)){buf.push(key);if(val!==undefined){buf.push(eq,encode(val+EMPTY))
}buf.push(sep)}else{if(S.isArray(val)&&val.length){for(i=0,len=val.length;i<len;++i){v=val[i];if(isValidParamValue(v)){buf.push(key,(serializeArray?encode("[]"):EMPTY));if(v!==undefined){buf.push(eq,encode(v+EMPTY))}buf.push(sep)}}}}}buf.pop();return buf.join(EMPTY)},unparam:function(str,sep,eq){if(typeof str!=="string"||!(str=S.trim(str))){return{}}sep=sep||SEP;eq=eq||EQ;var ret={},eqIndex,decode=S.urlDecode,pairs=str.split(sep),key,val,i=0,len=pairs.length;for(;i<len;++i){eqIndex=pairs[i].indexOf(eq);if(eqIndex===-1){key=decode(pairs[i]);val=undefined}else{key=decode(pairs[i].substring(0,eqIndex));val=pairs[i].substring(eqIndex+1);try{val=decode(val)}catch(e){logger.error("decodeURIComponent error : "+val);logger.error(e)}if(S.endsWith(key,"[]")){key=key.substring(0,key.length-2)}}if(key in ret){if(S.isArray(ret[key])){ret[key].push(val)}else{ret[key]=[ret[key],val]}}else{ret[key]=val}}return ret}});S.escapeHTML=S.escapeHtml;S.unEscapeHTML=S.unEscapeHtml})(KISSY);(function(S,undefined){function bindFn(r,fn,obj){function FNOP(){}var slice=[].slice,args=slice.call(arguments,3),bound=function(){var inArgs=slice.call(arguments);return fn.apply(this instanceof FNOP?this:obj||this,(r?inArgs.concat(args):args.concat(inArgs)))};FNOP.prototype=fn.prototype;bound.prototype=new FNOP();return bound}S.mix(S,{noop:function(){},bind:bindFn(0,bindFn,null,0),rbind:bindFn(0,bindFn,null,1),later:function(fn,when,periodic,context,data){when=when||0;var m=fn,d=S.makeArray(data),f,r;if(typeof fn==="string"){m=context[fn]}if(!m){S.error("method undefined")}f=function(){m.apply(context,d)};r=(periodic)?setInterval(f,when):setTimeout(f,when);return{id:r,interval:periodic,cancel:function(){if(this.interval){clearInterval(r)}else{clearTimeout(r)}}}},throttle:function(fn,ms,context){ms=ms||150;if(ms===-1){return function(){fn.apply(context||this,arguments)}}var last=S.now();return function(){var now=S.now();if(now-last>ms){last=now;fn.apply(context||this,arguments)}}},buffer:function(fn,ms,context){ms=ms||150;if(ms===-1){return function(){fn.apply(context||this,arguments)}}var bufferTimer=null;function f(){f.stop();bufferTimer=S.later(fn,ms,0,context||this,arguments)}f.stop=function(){if(bufferTimer){bufferTimer.cancel();bufferTimer=0}};return f}})})(KISSY);(function(S,undefined){var TRUE=true,FALSE=false,CLONE_MARKER="__~ks_cloned",COMPARE_MARKER="__~ks_compared";S.mix(S,{equals:function(a,b,mismatchKeys,mismatchValues){mismatchKeys=mismatchKeys||[];mismatchValues=mismatchValues||[];if(a===b){return TRUE}if(a===undefined||a===null||b===undefined||b===null){return a==null&&b==null}if(a instanceof Date&&b instanceof Date){return a.getTime()===b.getTime()}if(typeof a==="string"&&typeof b==="string"){return(a===b)}if(typeof a==="number"&&typeof b==="number"){return(a===b)}if(typeof a==="object"&&typeof b==="object"){return compareObjects(a,b,mismatchKeys,mismatchValues)}return(a===b)},clone:function(input,filter){var memory={},ret=cloneInternal(input,filter,memory);S.each(memory,function(v){v=v.input;if(v[CLONE_MARKER]){try{delete v[CLONE_MARKER]}catch(e){v[CLONE_MARKER]=undefined}}});memory=null;return ret},now:Date.now||function(){return +new Date()}});function cloneInternal(input,f,memory){var destination=input,isArray,isPlainObject,k,stamp;if(!input){return destination}if(input[CLONE_MARKER]){return memory[input[CLONE_MARKER]].destination}else{if(typeof input==="object"){var Constructor=input.constructor;if(S.inArray(Constructor,[Boolean,String,Number,Date,RegExp])){destination=new Constructor(input.valueOf())}else{if((isArray=S.isArray(input))){destination=f?S.filter(input,f):input.concat()}else{if((isPlainObject=S.isPlainObject(input))){destination={}}}}input[CLONE_MARKER]=(stamp=S.guid("c"));memory[stamp]={destination:destination,input:input}}}if(isArray){for(var i=0;i<destination.length;i++){destination[i]=cloneInternal(destination[i],f,memory)}}else{if(isPlainObject){for(k in input){if(k!==CLONE_MARKER&&(!f||(f.call(input,input[k],k,input)!==FALSE))){destination[k]=cloneInternal(input[k],f,memory)}}}}return destination}function compareObjects(a,b,mismatchKeys,mismatchValues){if(a[COMPARE_MARKER]===b&&b[COMPARE_MARKER]===a){return TRUE}a[COMPARE_MARKER]=b;b[COMPARE_MARKER]=a;var hasKey=function(obj,keyName){return(obj!==null&&obj!==undefined)&&obj[keyName]!==undefined};for(var property in b){if(!hasKey(a,property)&&hasKey(b,property)){mismatchKeys.push("expected has key "+property+'", but missing from actual.')}}for(property in a){if(!hasKey(b,property)&&hasKey(a,property)){mismatchKeys.push('expected missing key "'+property+'", but present in actual.')}}for(property in b){if(property===COMPARE_MARKER){continue}if(!S.equals(a[property],b[property],mismatchKeys,mismatchValues)){mismatchValues.push('"'+property+'" was "'+(b[property]?(b[property].toString()):b[property])+'" in expected, but was "'+(a[property]?(a[property].toString()):a[property])+'" in actual.')}}if(S.isArray(a)&&S.isArray(b)&&a.length!==b.length){mismatchValues.push("arrays were not the same length")
}delete a[COMPARE_MARKER];delete b[COMPARE_MARKER];return(mismatchKeys.length===0&&mismatchValues.length===0)}})(KISSY);(function(S,undefined){var RE_TRIM=/^[\s\xa0]+|[\s\xa0]+$/g,trim=String.prototype.trim,SUBSTITUTE_REG=/\\?\{([^{}]+)\}/g,EMPTY="";S.mix(S,{trim:trim?function(str){return str==null?EMPTY:trim.call(str)}:function(str){return str==null?EMPTY:(str+"").replace(RE_TRIM,EMPTY)},substitute:function(str,o,regexp){if(typeof str!=="string"||!o){return str}return str.replace(regexp||SUBSTITUTE_REG,function(match,name){if(match.charAt(0)==="\\"){return match.slice(1)}return(o[name]===undefined)?EMPTY:o[name]})},ucfirst:function(s){s+="";return s.charAt(0).toUpperCase()+s.substring(1)},startsWith:function(str,prefix){return str.lastIndexOf(prefix,0)===0},endsWith:function(str,suffix){var ind=str.length-suffix.length;return ind>=0&&str.indexOf(suffix,ind)===ind}})})(KISSY);(function(S,undefined){var class2type={},FALSE=false,noop=S.noop,OP=Object.prototype,toString=OP.toString;function hasOwnProperty(o,p){return OP.hasOwnProperty.call(o,p)}S.mix(S,{type:function(o){return o==null?String(o):class2type[toString.call(o)]||"object"},isNull:function(o){return o===null},isUndefined:function(o){return o===undefined},isEmptyObject:function(o){for(var p in o){if(p!==undefined){return FALSE}}return true},isPlainObject:function(obj){if(!obj||S.type(obj)!=="object"||obj.nodeType||obj.window==obj){return FALSE}var key,objConstructor;try{if((objConstructor=obj.constructor)&&!hasOwnProperty(obj,"constructor")&&!hasOwnProperty(objConstructor.prototype,"isPrototypeOf")){return FALSE}}catch(e){return FALSE}for(key in obj){}return((key===undefined)||hasOwnProperty(obj,key))}});if("@DEBUG@"){S.mix(S,{isBoolean:noop,isNumber:noop,isString:noop,isFunction:noop,isArray:noop,isDate:noop,isRegExp:noop,isObject:noop})}S.each("Boolean Number String Function Date RegExp Object Array".split(" "),function(name,lc){class2type["[object "+name+"]"]=(lc=name.toLowerCase());S["is"+name]=function(o){return S.type(o)===lc}});S.isArray=Array.isArray||S.isArray})(KISSY);(function(S){var queue=[];var flushing=0;function flush(){var i=0,item;while((item=queue[i++])){try{item()}catch(e){S.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}if(i>1){queue=[]}flushing=0}S.setImmediate=function(fn){queue.push(fn);if(!flushing){flushing=1;requestFlush()}};var requestFlush;if(typeof setImmediate==="function"){requestFlush=function(){setImmediate(flush)}}else{if(typeof process!=="undefined"&&typeof process.nextTick==="function"){requestFlush=function(){process.nextTick(flush)}}else{if(typeof MessageChannel!=="undefined"){var channel=new MessageChannel();channel.port1.onmessage=function(){requestFlush=realRequestFlush;channel.port1.onmessage=flush;flush()};var realRequestFlush=function(){channel.port2.postMessage(0)};requestFlush=function(){setTimeout(flush,0);realRequestFlush()}}else{requestFlush=function(){setTimeout(flush,0)}}}}})(KISSY);(function(S){var splitPathRe=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function normalizeArray(parts,allowAboveRoot){var up=0,i=parts.length-1,newParts=[],last;for(;i>=0;i--){last=parts[i];if(last!=="."){if(last===".."){up++}else{if(up){up--}else{newParts[newParts.length]=last}}}}if(allowAboveRoot){for(;up--;up){newParts[newParts.length]=".."}}newParts=newParts.reverse();return newParts}var Path=S.Path={resolve:function(){var resolvedPath="",resolvedPathStr,i,args=(arguments),path,absolute=0;for(i=args.length-1;i>=0&&!absolute;i--){path=args[i];if(typeof path!=="string"||!path){continue}resolvedPath=path+"/"+resolvedPath;absolute=path.charAt(0)==="/"}resolvedPathStr=normalizeArray(S.filter(resolvedPath.split("/"),function(p){return !!p}),!absolute).join("/");return((absolute?"/":"")+resolvedPathStr)||"."},normalize:function(path){var absolute=path.charAt(0)==="/",trailingSlash=path.slice(-1)==="/";path=normalizeArray(S.filter(path.split("/"),function(p){return !!p}),!absolute).join("/");if(!path&&!absolute){path="."}if(path&&trailingSlash){path+="/"}return(absolute?"/":"")+path},join:function(){var args=S.makeArray(arguments);return Path.normalize(S.filter(args,function(p){return p&&(typeof p==="string")}).join("/"))},relative:function(from,to){from=Path.normalize(from);to=Path.normalize(to);var fromParts=S.filter(from.split("/"),function(p){return !!p}),path=[],sameIndex,sameIndex2,toParts=S.filter(to.split("/"),function(p){return !!p}),commonLength=Math.min(fromParts.length,toParts.length);for(sameIndex=0;sameIndex<commonLength;sameIndex++){if(fromParts[sameIndex]!==toParts[sameIndex]){break}}sameIndex2=sameIndex;while(sameIndex<fromParts.length){path.push("..");sameIndex++}path=path.concat(toParts.slice(sameIndex2));path=path.join("/");return path},basename:function(path,ext){var result=path.match(splitPathRe)||[],basename;basename=result[3]||"";if(ext&&basename&&basename.slice(-1*ext.length)===ext){basename=basename.slice(0,-1*ext.length)}return basename},dirname:function(path){var result=path.match(splitPathRe)||[],root=result[1]||"",dir=result[2]||"";
if(!root&&!dir){return"."}if(dir){dir=dir.substring(0,dir.length-1)}return root+dir},extname:function(path){return(path.match(splitPathRe)||[])[4]||""}}})(KISSY);(function(S,undefined){var logger=S.getLogger("s/uri");var reDisallowedInSchemeOrUserInfo=/[#\/\?@]/g,reDisallowedInPathName=/[#\?]/g,reDisallowedInQuery=/[#@]/g,reDisallowedInFragment=/#/g,URI_SPLIT_REG=new RegExp("^"+"(?:([\\w\\d+.-]+):)?"+"(?://"+"(?:([^/?#@]*)@)?"+"("+"[\\w\\d\\-\\u0100-\\uffff.+%]*"+"|"+"\\[[^\\]]+\\]"+")"+"(?::([0-9]+))?"+")?"+"([^?#]+)?"+"(?:\\?([^#]*))?"+"(?:#(.*))?"+"$"),Path=S.Path,REG_INFO={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7};function parseQuery(self){if(!self._queryMap){self._queryMap=S.unparam(self._query)}}function Query(query){this._query=query||""}Query.prototype={constructor:Query,clone:function(){return new Query(this.toString())},reset:function(query){var self=this;self._query=query||"";self._queryMap=null;return self},count:function(){var self=this,count=0,_queryMap,k;parseQuery(self);_queryMap=self._queryMap;for(k in _queryMap){if(S.isArray(_queryMap[k])){count+=_queryMap[k].length}else{count++}}return count},has:function(key){var self=this,_queryMap;parseQuery(self);_queryMap=self._queryMap;if(key){return key in _queryMap}else{return !S.isEmptyObject(_queryMap)}},get:function(key){var self=this,_queryMap;parseQuery(self);_queryMap=self._queryMap;if(key){return _queryMap[key]}else{return _queryMap}},keys:function(){var self=this;parseQuery(self);return S.keys(self._queryMap)},set:function(key,value){var self=this,_queryMap;parseQuery(self);_queryMap=self._queryMap;if(typeof key==="string"){self._queryMap[key]=value}else{if(key instanceof Query){key=key.get()}S.each(key,function(v,k){_queryMap[k]=v})}return self},remove:function(key){var self=this;parseQuery(self);if(key){delete self._queryMap[key]}else{self._queryMap={}}return self},add:function(key,value){var self=this,_queryMap,currentValue;if(typeof key==="string"){parseQuery(self);_queryMap=self._queryMap;currentValue=_queryMap[key];if(currentValue===undefined){currentValue=value}else{currentValue=[].concat(currentValue).concat(value)}_queryMap[key]=currentValue}else{if(key instanceof Query){key=key.get()}for(var k in key){self.add(k,key[k])}}return self},toString:function(serializeArray){var self=this;parseQuery(self);return S.param(self._queryMap,undefined,undefined,serializeArray)}};function padding2(str){return str.length===1?"0"+str:str}function equalsIgnoreCase(str1,str2){return str1.toLowerCase()===str2.toLowerCase()}function encodeSpecialChars(str,specialCharsReg){return encodeURI(str).replace(specialCharsReg,function(m){return"%"+padding2(m.charCodeAt(0).toString(16))})}function Uri(uriStr){if(uriStr instanceof Uri){return uriStr.clone()}var components,self=this;S.mix(self,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""});components=Uri.getComponents(uriStr);S.each(components,function(v,key){v=v||"";if(key==="query"){self.query=new Query(v)}else{try{v=S.urlDecode(v)}catch(e){logger.error(e+"urlDecode error : "+v)}self[key]=v}});return self}Uri.prototype={constructor:Uri,clone:function(){var uri=new Uri(),self=this;S.each(REG_INFO,function(index,key){uri[key]=self[key]});uri.query=uri.query.clone();return uri},resolve:function(relativeUri){if(typeof relativeUri==="string"){relativeUri=new Uri(relativeUri)}var self=this,override=0,lastSlashIndex,order=["scheme","userInfo","hostname","port","path","query","fragment"],target=self.clone();S.each(order,function(o){if(o==="path"){if(override){target[o]=relativeUri[o]}else{var path=relativeUri.path;if(path){override=1;if(!S.startsWith(path,"/")){if(target.hostname&&!target.path){path="/"+path}else{if(target.path){lastSlashIndex=target.path.lastIndexOf("/");if(lastSlashIndex!==-1){path=target.path.slice(0,lastSlashIndex+1)+path}}}}target.path=Path.normalize(path)}}}else{if(o==="query"){if(override||relativeUri.query.toString()){target.query=relativeUri.query.clone();override=1}}else{if(override||relativeUri[o]){target[o]=relativeUri[o];override=1}}}});return target},getScheme:function(){return this.scheme},setScheme:function(scheme){this.scheme=scheme;return this},getHostname:function(){return this.hostname},setHostname:function(hostname){this.hostname=hostname;return this},"setUserInfo":function(userInfo){this.userInfo=userInfo;return this},getUserInfo:function(){return this.userInfo},"setPort":function(port){this.port=port;return this},"getPort":function(){return this.port},setPath:function(path){this.path=path;return this},getPath:function(){return this.path},"setQuery":function(query){if(typeof query==="string"){if(S.startsWith(query,"?")){query=query.slice(1)}query=new Query(encodeSpecialChars(query,reDisallowedInQuery))}this.query=query;return this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},"setFragment":function(fragment){var self=this;if(S.startsWith(fragment,"#")){fragment=fragment.slice(1)}self.fragment=fragment;
return self},isSameOriginAs:function(other){var self=this;return equalsIgnoreCase(self.hostname,other.hostname)&&equalsIgnoreCase(self.scheme,other.scheme)&&equalsIgnoreCase(self.port,other.port)},toString:function(serializeArray){var out=[],self=this,scheme,hostname,path,port,fragment,query,userInfo;if((scheme=self.scheme)){out.push(encodeSpecialChars(scheme,reDisallowedInSchemeOrUserInfo));out.push(":")}if((hostname=self.hostname)){out.push("//");if((userInfo=self.userInfo)){out.push(encodeSpecialChars(userInfo,reDisallowedInSchemeOrUserInfo));out.push("@")}out.push(encodeURIComponent(hostname));if((port=self.port)){out.push(":");out.push(port)}}if((path=self.path)){if(hostname&&!S.startsWith(path,"/")){path="/"+path}path=Path.normalize(path);out.push(encodeSpecialChars(path,reDisallowedInPathName))}if((query=(self.query.toString.call(self.query,serializeArray)))){out.push("?");out.push(query)}if((fragment=self.fragment)){out.push("#");out.push(encodeSpecialChars(fragment,reDisallowedInFragment))}return out.join("")}};Uri.Query=Query;Uri.getComponents=function(url){url=url||"";var m=url.match(URI_SPLIT_REG)||[],ret={};S.each(REG_INFO,function(index,key){ret[key]=m[index]});return ret};S.Uri=Uri})(KISSY);(function(S,undefined){var win=S.Env.host,doc=win.document,navigator=win.navigator,ua=navigator&&navigator.userAgent||"";function numberify(s){var c=0;return parseFloat(s.replace(/\./g,function(){return(c++===0)?".":""}))}function setTridentVersion(ua,UA){var core,m;UA[core="trident"]=0.1;if((m=ua.match(/Trident\/([\d.]*)/))&&m[1]){UA[core]=numberify(m[1])}UA.core=core}function getIEVersion(ua){var m,v;if((m=ua.match(/MSIE ([^;]*)|Trident.*; rv(?:\s|:)?([0-9.]+)/))&&(v=(m[1]||m[2]))){return numberify(v)}return 0}function getDescriptorFromUserAgent(ua){var EMPTY="",os,core=EMPTY,shell=EMPTY,m,IE_DETECT_RANGE=[6,9],ieVersion,v,end,VERSION_PLACEHOLDER="{{version}}",IE_DETECT_TPL="<!--[if IE "+VERSION_PLACEHOLDER+"]><"+"s></s><![endif]-->",div=doc&&doc.createElement("div"),s=[];var UA={webkit:undefined,trident:undefined,gecko:undefined,presto:undefined,chrome:undefined,safari:undefined,firefox:undefined,ie:undefined,ieMode:undefined,opera:undefined,mobile:undefined,core:undefined,shell:undefined,phantomjs:undefined,os:undefined,ipad:undefined,iphone:undefined,ipod:undefined,ios:undefined,android:undefined,nodejs:undefined};if(div&&div.getElementsByTagName){div.innerHTML=IE_DETECT_TPL.replace(VERSION_PLACEHOLDER,"");s=div.getElementsByTagName("s")}if(s.length>0){setTridentVersion(ua,UA);for(v=IE_DETECT_RANGE[0],end=IE_DETECT_RANGE[1];v<=end;v++){div.innerHTML=IE_DETECT_TPL.replace(VERSION_PLACEHOLDER,v);if(s.length>0){UA[shell="ie"]=v;break}}if(!UA.ie&&(ieVersion=getIEVersion(ua))){UA[shell="ie"]=ieVersion}}else{if((m=ua.match(/AppleWebKit\/([\d.]*)/))&&m[1]){UA[core="webkit"]=numberify(m[1]);if((m=ua.match(/OPR\/(\d+\.\d+)/))&&m[1]){UA[shell="opera"]=numberify(m[1])}else{if((m=ua.match(/Chrome\/([\d.]*)/))&&m[1]){UA[shell="chrome"]=numberify(m[1])}else{if((m=ua.match(/\/([\d.]*) Safari/))&&m[1]){UA[shell="safari"]=numberify(m[1])}}}if(/ Mobile\//.test(ua)&&ua.match(/iPad|iPod|iPhone/)){UA.mobile="apple";m=ua.match(/OS ([^\s]*)/);if(m&&m[1]){UA.ios=numberify(m[1].replace("_","."))}os="ios";m=ua.match(/iPad|iPod|iPhone/);if(m&&m[0]){UA[m[0].toLowerCase()]=UA.ios}}else{if(/ Android/i.test(ua)){if(/Mobile/.test(ua)){os=UA.mobile="android"}m=ua.match(/Android ([^\s]*);/);if(m&&m[1]){UA.android=numberify(m[1])}}else{if((m=ua.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))){UA.mobile=m[0].toLowerCase()}}}if((m=ua.match(/PhantomJS\/([^\s]*)/))&&m[1]){UA.phantomjs=numberify(m[1])}}else{if((m=ua.match(/Presto\/([\d.]*)/))&&m[1]){UA[core="presto"]=numberify(m[1]);if((m=ua.match(/Opera\/([\d.]*)/))&&m[1]){UA[shell="opera"]=numberify(m[1]);if((m=ua.match(/Opera\/.* Version\/([\d.]*)/))&&m[1]){UA[shell]=numberify(m[1])}if((m=ua.match(/Opera Mini[^;]*/))&&m){UA.mobile=m[0].toLowerCase()}else{if((m=ua.match(/Opera Mobi[^;]*/))&&m){UA.mobile=m[0]}}}}else{if((ieVersion=getIEVersion(ua))){UA[shell="ie"]=ieVersion;setTridentVersion(ua,UA)}else{if((m=ua.match(/Gecko/))){UA[core="gecko"]=0.1;if((m=ua.match(/rv:([\d.]*)/))&&m[1]){UA[core]=numberify(m[1]);if(/Mobile|Tablet/.test(ua)){UA.mobile="firefox"}}if((m=ua.match(/Firefox\/([\d.]*)/))&&m[1]){UA[shell="firefox"]=numberify(m[1])}}}}}}if(!os){if((/windows|win32/i).test(ua)){os="windows"}else{if((/macintosh|mac_powerpc/i).test(ua)){os="macintosh"}else{if((/linux/i).test(ua)){os="linux"}else{if((/rhino/i).test(ua)){os="rhino"}}}}}UA.os=os;UA.core=UA.core||core;UA.shell=shell;UA.ieMode=UA.ie&&doc.documentMode||UA.ie;return UA}var UA=KISSY.UA=getDescriptorFromUserAgent(ua);if(typeof process==="object"){var versions,nodeVersion;if((versions=process.versions)&&(nodeVersion=versions.node)){UA.os=process.platform;UA.nodejs=numberify(nodeVersion)}}UA.getDescriptorFromUserAgent=getDescriptorFromUserAgent;var browsers=["webkit","trident","gecko","presto","chrome","safari","firefox","ie","opera"],documentElement=doc&&doc.documentElement,className="";
if(documentElement){S.each(browsers,function(key){var v=UA[key];if(v){className+=" ks-"+key+(parseInt(v)+"");className+=" ks-"+key}});if(S.trim(className)){documentElement.className=S.trim(documentElement.className+className)}}})(KISSY);(function(S,undefined){var Env=S.Env,win=Env.host,UA=S.UA,VENDORS=["","Webkit","Moz","O","ms"],doc=win.document||{},isMsPointerSupported,isPointerSupported,transitionProperty,transformProperty,transitionPrefix,transformPrefix,isTransform3dSupported,documentElement=doc.documentElement,documentElementStyle,isClassListSupportedState=true,isQuerySelectorSupportedState=false,isTouchEventSupportedState=("ontouchstart" in doc)&&!(UA.phantomjs),ie=UA.ieMode;if(documentElement){if(documentElement.querySelector&&ie!==8){isQuerySelectorSupportedState=true}documentElementStyle=documentElement.style;S.each(VENDORS,function(val){var transition=val?val+"Transition":"transition",transform=val?val+"Transform":"transform";if(transitionPrefix===undefined&&transition in documentElementStyle){transitionPrefix=val;transitionProperty=transition}if(transformPrefix===undefined&&transform in documentElementStyle){transformPrefix=val;transformProperty=transform}});isClassListSupportedState="classList" in documentElement;var navigator=(win.navigator||{});isMsPointerSupported="msPointerEnabled" in navigator;isPointerSupported="pointerEnabled" in navigator;if(transformProperty){var el=doc.createElement("p");documentElement.insertBefore(el,documentElement.firstChild);el.style[transformProperty]="translate3d(1px,1px,1px)";var computedStyle=win.getComputedStyle(el);var has3d=computedStyle.getPropertyValue(transformProperty)||computedStyle[transformProperty];documentElement.removeChild(el);isTransform3dSupported=(has3d!==undefined&&has3d.length>0&&has3d!=="none")}}S.Features={isMsPointerSupported:function(){return isMsPointerSupported},isPointerSupported:function(){return isPointerSupported},isTouchEventSupported:function(){return isTouchEventSupportedState},isTouchGestureSupported:function(){return isTouchEventSupportedState||isPointerSupported||isMsPointerSupported},isDeviceMotionSupported:function(){return !!win.DeviceMotionEvent},"isHashChangeSupported":function(){return("onhashchange" in win)&&(!ie||ie>7)},"isTransitionSupported":function(){return transitionPrefix!==undefined},"isTransformSupported":function(){return transformPrefix!==undefined},"isTransform3dSupported":function(){return isTransform3dSupported},"isClassListSupported":function(){return isClassListSupportedState},"isQuerySelectorSupported":function(){return !S.config("dom/selector")&&isQuerySelectorSupportedState},"isIELessThan":function(v){return !!(ie&&ie<v)},"getTransitionPrefix":function(){return transitionPrefix},"getTransformPrefix":function(){return transformPrefix},"getTransitionProperty":function(){return transitionProperty},"getTransformProperty":function(){return transformProperty}}})(KISSY);(function(S){var Loader=S.Loader={};Loader.Status={"ERROR":-1,"INIT":0,"LOADING":1,"LOADED":2,"READY_TO_ATTACH":3,"ATTACHING":4,"ATTACHED":5}})(KISSY);(function(S){var Loader=S.Loader,Path=S.Path,host=S.Env.host,TRUE=!0,FALSE=!1,startsWith=S.startsWith,data=Loader.Status,ATTACHED=data.ATTACHED,READY_TO_ATTACH=data.READY_TO_ATTACH,LOADED=data.LOADED,ATTACHING=data.ATTACHING,ERROR=data.ERROR,Utils=Loader.Utils={},doc=host.document;function addIndexAndRemoveJsExt(s){if(typeof s==="string"){return addIndexAndRemoveJsExtFromName(s)}else{var ret=[],i=0,l=s.length;for(;i<l;i++){ret[i]=addIndexAndRemoveJsExtFromName(s[i])}return ret}}function addIndexAndRemoveJsExtFromName(name){if(name.charAt(name.length-1)==="/"){name+="index"}if(S.endsWith(name,".js")){name=name.slice(0,-3)}return name}function pluginAlias(runtime,name){var index=name.indexOf("!");if(index!==-1){var pluginName=name.substring(0,index);name=name.substring(index+1);S.use(pluginName,{sync:true,success:function(S,Plugin){if(Plugin.alias){name=Plugin.alias(runtime,name,pluginName)}}})}return name}S.mix(Utils,{docHead:function(){return doc.getElementsByTagName("head")[0]||doc.documentElement},normalDepModuleName:function(moduleName,depName){var i=0,l;if(!depName){return depName}if(typeof depName==="string"){if(startsWith(depName,"../")||startsWith(depName,"./")){return Path.resolve(Path.dirname(moduleName),depName)}return Path.normalize(depName)}for(l=depName.length;i<l;i++){depName[i]=Utils.normalDepModuleName(moduleName,depName[i])}return depName},createModulesInfo:function(runtime,modNames){S.each(modNames,function(m){Utils.createModuleInfo(runtime,m)})},createModuleInfo:function(runtime,modName,cfg){modName=addIndexAndRemoveJsExtFromName(modName);var mods=runtime.Env.mods,module=mods[modName];if(module){return module}mods[modName]=module=new Loader.Module(S.mix({name:modName,runtime:runtime},cfg));return module},getModules:function(runtime,modNames){var mods=[runtime],module,unalias,allOk,m,runtimeMods=runtime.Env.mods;S.each(modNames,function(modName){module=runtimeMods[modName];if(!module||module.getType()!=="css"){unalias=Utils.unalias(runtime,modName);
allOk=S.reduce(unalias,function(a,n){m=runtimeMods[n];return a&&m&&m.status>=ATTACHING},true);if(allOk){mods.push(runtimeMods[unalias[0]].exports)}else{mods.push(null)}}else{mods.push(undefined)}});return mods},attachModsRecursively:function(modNames,runtime){var i,l=modNames.length;for(i=0;i<l;i++){Utils.attachModRecursively(modNames[i],runtime)}},checkModsLoadRecursively:function(modNames,runtime,stack,errorList,cache){stack=stack||[];cache=cache||{};var i,s=1,l=modNames.length,stackDepth=stack.length;for(i=0;i<l;i++){s=s&&Utils.checkModLoadRecursively(modNames[i],runtime,stack,errorList,cache);stack.length=stackDepth}return !!s},checkModLoadRecursively:function(modName,runtime,stack,errorList,cache){var mods=runtime.Env.mods,status,m=mods[modName];if(modName in cache){return cache[modName]}if(!m){cache[modName]=FALSE;return FALSE}status=m.status;if(status===ERROR){errorList.push(m);cache[modName]=FALSE;return FALSE}if(status>=READY_TO_ATTACH){cache[modName]=TRUE;return TRUE}if(status!==LOADED){cache[modName]=FALSE;return FALSE}if("@DEBUG@"){if(S.inArray(modName,stack)){S.log("find cyclic dependency between mods: "+stack,"warn");cache[modName]=TRUE;return TRUE}stack.push(modName)}if(Utils.checkModsLoadRecursively(m.getNormalizedRequires(),runtime,stack,errorList,cache)){m.status=READY_TO_ATTACH;cache[modName]=TRUE;return TRUE}cache[modName]=FALSE;return FALSE},attachModRecursively:function(modName,runtime){var mods=runtime.Env.mods,status,m=mods[modName];status=m.status;if(status>=ATTACHING){return}m.status=ATTACHING;if(m.cjs){Utils.attachMod(runtime,m)}else{Utils.attachModsRecursively(m.getNormalizedRequires(),runtime);Utils.attachMod(runtime,m)}},attachMod:function(runtime,module){var factory=module.factory,exports;if(typeof factory==="function"){var require;if(module.requires&&module.requires.length){require=S.bind(module.require,module)}exports=factory.apply(module,(module.cjs?[runtime,require,module.exports,module]:Utils.getModules(runtime,module.getRequiresWithAlias())));if(exports!==undefined){module.exports=exports}}else{module.exports=factory}module.status=ATTACHED},getModNamesAsArray:function(modNames){if(typeof modNames==="string"){modNames=modNames.replace(/\s+/g,"").split(",")}return modNames},normalizeModNames:function(runtime,modNames,refModName){return Utils.unalias(runtime,Utils.normalizeModNamesWithAlias(runtime,modNames,refModName))},unalias:function(runtime,names){var ret=[].concat(names),i,m,alias,ok=0,j,mods=runtime.Env.mods;while(!ok){ok=1;for(i=ret.length-1;i>=0;i--){if((m=mods[ret[i]])&&("alias" in m)){ok=0;alias=m.alias;if(typeof alias==="string"){alias=[alias]}for(j=alias.length-1;j>=0;j--){if(!alias[j]){alias.splice(j,1)}}ret.splice.apply(ret,[i,1].concat(addIndexAndRemoveJsExt(alias)))}}}return ret},normalizeModNamesWithAlias:function(runtime,modNames,refModName){var ret=[],i,l;if(modNames){for(i=0,l=modNames.length;i<l;i++){if(modNames[i]){ret.push(pluginAlias(runtime,addIndexAndRemoveJsExt(modNames[i])))}}}if(refModName){ret=Utils.normalDepModuleName(refModName,ret)}return ret},registerModule:function(runtime,name,factory,config){name=addIndexAndRemoveJsExtFromName(name);var mods=runtime.Env.mods,module=mods[name];if(module&&module.factory!==undefined){S.log(name+" is defined more than once","warn");return}Utils.createModuleInfo(runtime,name);module=mods[name];S.mix(module,{name:name,status:LOADED,factory:factory});S.mix(module,config)},getHash:function(str){var hash=5381,i;for(i=str.length;--i>-1;){hash=((hash<<5)+hash)+str.charCodeAt(i)}return hash+""},getRequiresFromFn:function(fn){var requires=[];fn.toString().replace(commentRegExp,"").replace(requireRegExp,function(match,dep){requires.push(getRequireVal(dep))});return requires}});var commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,requireRegExp=/[^.'"]\s*require\s*\(([^)]+)\)/g;function getRequireVal(str){var m;if(!(m=str.match(/^\s*["']([^'"\s]+)["']\s*$/))){S.error("can not find required mod in require call: "+str)}return m[1]}})(KISSY);(function(S){var Loader=S.Loader,Path=S.Path,IGNORE_PACKAGE_NAME_IN_URI="ignorePackageNameInUri",Utils=Loader.Utils;function forwardSystemPackage(self,property){return property in self?self[property]:self.runtime.Config[property]}function Package(cfg){S.mix(this,cfg)}Package.prototype={constructor:Package,reset:function(cfg){S.mix(this,cfg)},getTag:function(){return forwardSystemPackage(this,"tag")},getName:function(){return this.name},"getBase":function(){return forwardSystemPackage(this,"base")},getPrefixUriForCombo:function(){var self=this,packageName=self.name;return self.getBase()+(packageName&&!self.isIgnorePackageNameInUri()?(packageName+"/"):"")},getPackageUri:function(){var self=this;if(!self.packageUri){self.packageUri=new S.Uri(this.getPrefixUriForCombo())}return self.packageUri},getBaseUri:function(){return forwardSystemPackage(this,"baseUri")},isDebug:function(){return forwardSystemPackage(this,"debug")},isIgnorePackageNameInUri:function(){return forwardSystemPackage(this,IGNORE_PACKAGE_NAME_IN_URI)
},getCharset:function(){return forwardSystemPackage(this,"charset")},isCombine:function(){return forwardSystemPackage(this,"combine")},getGroup:function(){return forwardSystemPackage(this,"group")}};Loader.Package=Package;function Module(cfg){var module=this;module.exports={};module.status=Loader.Status.INIT;module.name=undefined;module.factory=undefined;module.cjs=1;S.mix(module,cfg);module.waitedCallbacks=[]}Module.prototype={kissy:1,constructor:Module,"use":function(relativeName,fn){relativeName=Utils.getModNamesAsArray(relativeName);return KISSY.use(Utils.normalDepModuleName(this.name,relativeName),fn)},"resolve":function(relativePath){return this.getFullPathUri().resolve(relativePath)},"resolveByName":function(relativeName){return Utils.normalDepModuleName(this.name,relativeName)},require:function(moduleName){return S.require(moduleName,this.name)},wait:function(callback){this.waitedCallbacks.push(callback)},notifyAll:function(){var callback;var len=this.waitedCallbacks.length,i=0;for(;i<len;i++){callback=this.waitedCallbacks[i];try{callback(this)}catch(e){S.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}this.waitedCallbacks=[]},getType:function(){var self=this,v=self.type;if(!v){if(Path.extname(self.name).toLowerCase()===".css"){v="css"}else{v="js"}self.type=v}return v},getFullPathUri:function(){var self=this,t,fullPathUri,packageBaseUri,packageInfo,packageName,path;if(!self.fullPathUri){if(self.fullpath){fullPathUri=new S.Uri(self.fullpath)}else{packageInfo=self.getPackage();packageBaseUri=packageInfo.getBaseUri();path=self.getPath();if(packageInfo.isIgnorePackageNameInUri()&&(packageName=packageInfo.name)){path=Path.relative(packageName,path)}fullPathUri=packageBaseUri.resolve(path);if((t=self.getTag())){t+="."+self.getType();fullPathUri.query.set("t",t)}}self.fullPathUri=fullPathUri}return self.fullPathUri},getFullPath:function(){var self=this,fullPathUri;if(!self.fullpath){fullPathUri=self.getFullPathUri();self.fullpath=fullPathUri.toString()}return self.fullpath},getPath:function(){var self=this;return self.path||(self.path=defaultComponentJsName(self))},getName:function(){return this.name},getPackage:function(){var self=this;return self.packageInfo||(self.packageInfo=getPackage(self.runtime,self.name))},getTag:function(){var self=this;return self.tag||self.getPackage().getTag()},getCharset:function(){var self=this;return self.charset||self.getPackage().getCharset()},getRequiresWithAlias:function(){var self=this,requiresWithAlias=self.requiresWithAlias,requires=self.requires;if(!requires||requires.length===0){return requires||[]}else{if(!requiresWithAlias){self.requiresWithAlias=requiresWithAlias=Utils.normalizeModNamesWithAlias(self.runtime,requires,self.name)}}return requiresWithAlias},getRequiredMods:function(){var self=this,runtime=self.runtime;return S.map(self.getNormalizedRequires(),function(r){return Utils.createModuleInfo(runtime,r)})},getNormalizedRequires:function(){var self=this,normalizedRequires,normalizedRequiresStatus=self.normalizedRequiresStatus,status=self.status,requires=self.requires;if(!requires||requires.length===0){return requires||[]}else{if((normalizedRequires=self.normalizedRequires)&&(normalizedRequiresStatus===status)){return normalizedRequires}else{self.normalizedRequiresStatus=status;self.normalizedRequires=Utils.normalizeModNames(self.runtime,requires,self.name);return self.normalizedRequires}}}};Loader.Module=Module;function defaultComponentJsName(m){var name=m.name,extname="."+m.getType(),min="-min";name=Path.join(Path.dirname(name),Path.basename(name,extname));if(m.getPackage().isDebug()){min=""}return name+min+extname}var systemPackage=new Package({name:"",runtime:S});function getPackage(self,modName){var packages=self.config("packages"),modNameSlash=modName+"/",pName="",p;for(p in packages){if(S.startsWith(modNameSlash,p+"/")&&p.length>pName.length){pName=p}}return packages[pName]||systemPackage}})(KISSY);(function(S){var logger=S.getLogger("s/loader/getScript");var CSS_POLL_INTERVAL=30,UA=S.UA,Utils=S.Loader.Utils,timer=0,monitors={};function startCssTimer(){if(!timer){logger.debug("start css poll timer");cssPoll()}}function isCssLoaded(node,url){var loaded=0;if(UA.webkit){if(node.sheet){logger.debug("webkit css poll loaded: "+url);loaded=1}}else{if(node.sheet){try{var cssRules=node.sheet.cssRules;if(cssRules){logger.debug("same domain css poll loaded: "+url);loaded=1}}catch(ex){var exName=ex.name;logger.debug("css poll exception: "+exName+" "+ex.code+" "+url);if(exName==="NS_ERROR_DOM_SECURITY_ERR"){logger.debug("css poll exception: "+exName+"loaded : "+url);loaded=1}}}}return loaded}function cssPoll(){for(var url in monitors){var callbackObj=monitors[url],node=callbackObj.node;if(isCssLoaded(node,url)){if(callbackObj.callback){callbackObj.callback.call(node)}delete monitors[url]}}if(S.isEmptyObject(monitors)){logger.debug("clear css poll timer");timer=0}else{timer=setTimeout(cssPoll,CSS_POLL_INTERVAL)}}Utils.pollCss=function(node,callback){var href=node.href,arr;
arr=monitors[href]={};arr.node=node;arr.callback=callback;startCssTimer()};Utils.isCssLoaded=isCssLoaded})(KISSY);(function(S){var MILLISECONDS_OF_SECOND=1000,doc=S.Env.host.document,Utils=S.Loader.Utils,Path=S.Path,jsCssCallbacks={},headNode,UA=S.UA;S.getScript=function(url,success,charset){var config=success,css=0,error,timeout,attrs,callbacks,timer;if(S.startsWith(Path.extname(url).toLowerCase(),".css")){css=1}if(S.isPlainObject(config)){success=config.success;error=config.error;timeout=config.timeout;charset=config.charset;attrs=config.attrs}callbacks=jsCssCallbacks[url]=jsCssCallbacks[url]||[];callbacks.push([success,error]);if(callbacks.length>1){return callbacks.node}var node=doc.createElement(css?"link":"script"),clearTimer=function(){if(timer){timer.cancel();timer=undefined}};if(attrs){S.each(attrs,function(v,n){node.setAttribute(n,v)})}if(charset){node.charset=charset}if(css){node.href=url;node.rel="stylesheet"}else{node.src=url;node.async=true}callbacks.node=node;var end=function(error){var index=error,fn;clearTimer();S.each(jsCssCallbacks[url],function(callback){if((fn=callback[index])){fn.call(node)}});delete jsCssCallbacks[url]};var useNative="onload" in node;var forceCssPoll=S.Config.forceCssPoll||(UA.webkit&&UA.webkit<536);if(css&&forceCssPoll&&useNative){useNative=false}function onload(){var readyState=node.readyState;if(!readyState||readyState==="loaded"||readyState==="complete"){node.onreadystatechange=node.onload=null;end(0)}}if(useNative){node.onload=onload;node.onerror=function(){node.onerror=null;end(1)}}else{if(css){Utils.pollCss(node,function(){end(0)})}else{node.onreadystatechange=onload}}if(timeout){timer=S.later(function(){end(1)},timeout*MILLISECONDS_OF_SECOND)}if(!headNode){headNode=Utils.docHead()}if(css){headNode.appendChild(node)}else{headNode.insertBefore(node,headNode.firstChild)}return node}})(KISSY);(function(S,undefined){var Loader=S.Loader,Utils=Loader.Utils,host=S.Env.host,location=host.location,simulatedLocation,locationHref,configFns=S.Config.fns;if(!S.UA.nodejs&&location&&(locationHref=location.href)){simulatedLocation=new S.Uri(locationHref)}S.Config.loadModsFn=function(rs,config){S.getScript(rs.fullpath,config)};configFns.packages=function(config){var name,Config=this.Config,ps=Config.packages=Config.packages||{};if(config){S.each(config,function(cfg,key){name=cfg.name||key;var baseUri=normalizeBase(cfg.base||cfg.path);cfg.name=name;cfg.base=baseUri.toString();cfg.baseUri=baseUri;cfg.runtime=S;delete cfg.path;if(ps[name]){ps[name].reset(cfg)}else{ps[name]=new Loader.Package(cfg)}});return undefined}else{if(config===false){Config.packages={};return undefined}else{return ps}}};configFns.modules=function(modules){var self=this;if(modules){S.each(modules,function(modCfg,modName){var mod=Utils.createModuleInfo(self,modName,modCfg);if(mod.status===Loader.Status.INIT){S.mix(mod,modCfg)}})}};configFns.base=function(base){var self=this,Config=self.Config,baseUri;if(!base){return Config.base}baseUri=normalizeBase(base);Config.base=baseUri.toString();Config.baseUri=baseUri;return undefined};function normalizeBase(base){var baseUri;base=base.replace(/\\/g,"/");if(base.charAt(base.length-1)!=="/"){base+="/"}if(simulatedLocation){baseUri=simulatedLocation.resolve(base)}else{if(!S.startsWith(base,"file:")){base="file:"+base}baseUri=new S.Uri(base)}return baseUri}})(KISSY);(function(S,undefined){var oldIE=S.UA.ieMode<10;function loadScripts(runtime,rss,callback,charset,timeout){var count=rss&&rss.length,errorList=[],successList=[];function complete(){if(!(--count)){callback(successList,errorList)}}S.each(rss,function(rs){var mod;var config={timeout:timeout,success:function(){successList.push(rs);if(mod&&currentMod){logger.debug("standard browser get mod name after load : "+mod.name);Utils.registerModule(runtime,mod.name,currentMod.factory,currentMod.config);currentMod=undefined}complete()},error:function(){errorList.push(rs);complete()},charset:charset};if(!rs.combine){mod=rs.mods[0];if(mod.getType()==="css"){mod=undefined}else{if(oldIE){startLoadModName=mod.name;startLoadModTime=S.now();config.attrs={"data-mod-name":mod.name}}}}S.Config.loadModsFn(rs,config)})}var logger=S.getLogger("s/loader");var Loader=S.Loader,Status=Loader.Status,Utils=Loader.Utils,getHash=Utils.getHash,LOADING=Status.LOADING,LOADED=Status.LOADED,READY_TO_ATTACH=Status.READY_TO_ATTACH,ERROR=Status.ERROR,groupTag=S.now();ComboLoader.groupTag=groupTag;function ComboLoader(runtime,waitingModules){S.mix(this,{runtime:runtime,waitingModules:waitingModules})}var currentMod;var startLoadModName;var startLoadModTime;function checkKISSYRequire(config,factory){if(!config&&typeof factory==="function"&&factory.length>1){var requires=Utils.getRequiresFromFn(factory);if(requires.length){config=config||{};config.requires=requires}}else{if(config&&config.requires&&!config.cjs){config.cjs=0}}return config}ComboLoader.add=function(name,factory,config,runtime,argsLen){if(argsLen===3&&S.isArray(factory)){var tmp=factory;factory=config;
config={requires:tmp,cjs:1}}if(typeof name==="function"||argsLen===1){config=factory;factory=name;config=checkKISSYRequire(config,factory);if(oldIE){name=findModuleNameByInteractive();Utils.registerModule(runtime,name,factory,config);startLoadModName=null;startLoadModTime=0}else{currentMod={factory:factory,config:config}}}else{if(oldIE){startLoadModName=null;startLoadModTime=0}else{currentMod=undefined}config=checkKISSYRequire(config,factory);Utils.registerModule(runtime,name,factory,config)}};function findModuleNameByInteractive(){var scripts=S.Env.host.document.getElementsByTagName("script"),re,i,name,script;for(i=scripts.length-1;i>=0;i--){script=scripts[i];if(script.readyState==="interactive"){re=script;break}}if(re){name=re.getAttribute("data-mod-name")}else{logger.debug("can not find interactive script,time diff : "+(S.now()-startLoadModTime));logger.debug("old_ie get mod name from cache : "+startLoadModName);name=startLoadModName}return name}function debugRemoteModules(rss){S.each(rss,function(rs){var ms=[];S.each(rs.mods,function(m){if(m.status===LOADED){ms.push(m.name)}});if(ms.length){logger.info('load remote modules: "'+ms.join(", ")+'" from: "'+rs.fullpath+'"')}})}function getCommonPrefix(str1,str2){str1=str1.split(/\//);str2=str2.split(/\//);var l=Math.min(str1.length,str2.length);for(var i=0;i<l;i++){if(str1[i]!==str2[i]){break}}return str1.slice(0,i).join("/")+"/"}S.augment(ComboLoader,{use:function(normalizedModNames){var self=this,allModNames,comboUrls,timeout=S.Config.timeout,runtime=self.runtime;allModNames=S.keys(self.calculate(normalizedModNames));Utils.createModulesInfo(runtime,allModNames);comboUrls=self.getComboUrls(allModNames);S.each(comboUrls.css,function(cssOne){loadScripts(runtime,cssOne,function(success,error){if("@DEBUG@"){debugRemoteModules(success)}S.each(success,function(one){S.each(one.mods,function(mod){Utils.registerModule(runtime,mod.name,S.noop);mod.notifyAll()})});S.each(error,function(one){S.each(one.mods,function(mod){var msg=mod.name+" is not loaded! can not find module in path : "+one.fullpath;S.log(msg,"error");mod.status=ERROR;mod.notifyAll()})})},cssOne.charset,timeout)});S.each(comboUrls.js,function(jsOne){loadScripts(runtime,jsOne,function(success){if("@DEBUG@"){debugRemoteModules(success)}S.each(jsOne,function(one){S.each(one.mods,function(mod){if(!mod.factory){var msg=mod.name+" is not loaded! can not find module in path : "+one.fullpath;S.log(msg,"error");mod.status=ERROR}mod.notifyAll()})})},jsOne.charset,timeout)})},calculate:function(modNames,cache,ret){var i,m,mod,modStatus,self=this,waitingModules=self.waitingModules,runtime=self.runtime;ret=ret||{};cache=cache||{};for(i=0;i<modNames.length;i++){m=modNames[i];if(cache[m]){continue}cache[m]=1;mod=Utils.createModuleInfo(runtime,m);modStatus=mod.status;if(modStatus>=READY_TO_ATTACH){continue}if(modStatus!==LOADED){if(!waitingModules.contains(m)){if(modStatus!==LOADING){mod.status=LOADING;ret[m]=1}mod.wait(function(mod){waitingModules.remove(mod.name);waitingModules.notifyAll()});waitingModules.add(m)}}self.calculate(mod.getNormalizedRequires(),cache,ret)}return ret},getComboMods:function(modNames,comboPrefixes){var comboMods={},packageUri,runtime=this.runtime,i=0,l=modNames.length,modName,mod,packageInfo,type,typedCombos,mods,tag,charset,packagePath,packageName,group,fullpath;for(;i<l;++i){modName=modNames[i];mod=Utils.createModuleInfo(runtime,modName);type=mod.getType();fullpath=mod.getFullPath();packageInfo=mod.getPackage();packageName=packageInfo.name;charset=packageInfo.getCharset();tag=packageInfo.getTag();group=packageInfo.getGroup();packagePath=packageInfo.getPrefixUriForCombo();packageUri=packageInfo.getPackageUri();var comboName=packageName;if((mod.canBeCombined=packageInfo.isCombine()&&S.startsWith(fullpath,packagePath))&&group){comboName=group+"_"+charset+"_"+groupTag;var groupPrefixUri;if((groupPrefixUri=comboPrefixes[comboName])){if(groupPrefixUri.isSameOriginAs(packageUri)){groupPrefixUri.setPath(getCommonPrefix(groupPrefixUri.getPath(),packageUri.getPath()))}else{comboName=packageName;comboPrefixes[packageName]=packageUri}}else{comboPrefixes[comboName]=packageUri.clone()}}else{comboPrefixes[packageName]=packageUri}typedCombos=comboMods[type]=comboMods[type]||{};if(!(mods=typedCombos[comboName])){mods=typedCombos[comboName]=[];mods.charset=charset;mods.tags=[tag]}else{if(!(mods.tags.length===1&&mods.tags[0]===tag)){mods.tags.push(tag)}}mods.push(mod)}return comboMods},getComboUrls:function(modNames){var runtime=this.runtime,Config=runtime.Config,comboPrefix=Config.comboPrefix,comboSep=Config.comboSep,maxFileNum=Config.comboMaxFileNum,maxUrlLength=Config.comboMaxUrlLength;var comboPrefixes={};var comboMods=this.getComboMods(modNames,comboPrefixes);var comboRes={};for(var type in comboMods){comboRes[type]={};for(var comboName in comboMods[type]){var currentComboUrls=[];var currentComboMods=[];var mods=comboMods[type][comboName];var tags=mods.tags;var tag=tags.length>1?getHash(tags.join("")):tags[0];
var suffix=(tag?"?t="+encodeURIComponent(tag)+"."+type:""),suffixLength=suffix.length,basePrefix=comboPrefixes[comboName].toString(),baseLen=basePrefix.length,prefix=basePrefix+comboPrefix,res=comboRes[type][comboName]=[];var l=prefix.length;res.charset=mods.charset;res.mods=[];var pushComboUrl=function(){res.push({combine:1,fullpath:prefix+currentComboUrls.join(comboSep)+suffix,mods:currentComboMods})};for(var i=0;i<mods.length;i++){var currentMod=mods[i];res.mods.push(currentMod);var fullpath=currentMod.getFullPath();if(!currentMod.canBeCombined){res.push({combine:0,fullpath:fullpath,mods:[currentMod]});continue}var path=fullpath.slice(baseLen).replace(/\?.*$/,"");currentComboUrls.push(path);currentComboMods.push(currentMod);if(currentComboUrls.length>maxFileNum||(l+currentComboUrls.join(comboSep).length+suffixLength>maxUrlLength)){currentComboUrls.pop();currentComboMods.pop();pushComboUrl();currentComboUrls=[];currentComboMods=[];i--}}if(currentComboUrls.length){pushComboUrl()}}}return comboRes}});Loader.ComboLoader=ComboLoader})(KISSY);(function(S,undefined){var logger=S.getLogger("s/loader");var Loader=S.Loader,Env=S.Env,Utils=Loader.Utils,processImmediate=S.setImmediate,ComboLoader=Loader.ComboLoader;function WaitingModules(fn){S.mix(this,{fn:fn,waitMods:{}})}WaitingModules.prototype={constructor:WaitingModules,notifyAll:function(){var self=this,fn=self.fn;if(fn&&S.isEmptyObject(self.waitMods)){self.fn=null;fn()}},add:function(modName){this.waitMods[modName]=1},remove:function(modName){delete this.waitMods[modName]},contains:function(modName){return this.waitMods[modName]}};Loader.WaitingModules=WaitingModules;S.mix(S,{add:function(name,factory,cfg){ComboLoader.add(name,factory,cfg,S,arguments.length)},use:function(modNames,success){var normalizedModNames,loader,error,sync,tryCount=0,finalSuccess,waitingModules=new WaitingModules(loadReady);if(S.isPlainObject(success)){sync=success.sync;error=success.error;success=success.success}finalSuccess=function(){success.apply(S,Utils.getModules(S,modNames))};modNames=Utils.getModNamesAsArray(modNames);modNames=Utils.normalizeModNamesWithAlias(S,modNames);normalizedModNames=Utils.unalias(S,modNames);function loadReady(){++tryCount;var errorList=[],start=S.now(),ret;ret=Utils.checkModsLoadRecursively(normalizedModNames,S,undefined,errorList);logger.debug(tryCount+" check duration "+(S.now()-start));if(ret){Utils.attachModsRecursively(normalizedModNames,S);if(success){if(sync){finalSuccess()}else{processImmediate(finalSuccess)}}}else{if(errorList.length){if(error){if(sync){error.apply(S,errorList)}else{processImmediate(function(){error.apply(S,errorList)})}}}else{logger.debug(tryCount+" reload "+modNames);waitingModules.fn=loadReady;loader.use(normalizedModNames)}}}loader=new ComboLoader(S,waitingModules);if(sync){waitingModules.notifyAll()}else{processImmediate(function(){waitingModules.notifyAll()})}return S},require:function(moduleName,refName){if(moduleName){var moduleNames=Utils.unalias(S,Utils.normalizeModNamesWithAlias(S,[moduleName],refName));Utils.attachModsRecursively(moduleNames,S);return Utils.getModules(S,moduleNames)[1]}}});Env.mods={}})(KISSY);(function(S){var doc=S.Env.host&&S.Env.host.document;var Utils=S.Loader.Utils;var TIMESTAMP="20131209235315";var defaultComboPrefix="??";var defaultComboSep=",";function returnJson(s){return(new Function("return "+s))()}var baseReg=/^(.*)(seed|kissy)(?:-min)?\.js[^/]*/i,baseTestReg=/(seed|kissy)(?:-min)?\.js/i;function getBaseInfoFromOneScript(script){var src=script.src||"";if(!src.match(baseTestReg)){return 0}var baseInfo=script.getAttribute("data-config");if(baseInfo){baseInfo=returnJson(baseInfo)}else{baseInfo={}}var comboPrefix=baseInfo.comboPrefix||defaultComboPrefix;var comboSep=baseInfo.comboSep||defaultComboSep;var parts,base,index=src.indexOf(comboPrefix);if(index===-1){base=src.replace(baseReg,"$1")}else{base=src.substring(0,index);if(base.charAt(base.length-1)!=="/"){base+="/"}parts=src.substring(index+comboPrefix.length).split(comboSep);S.each(parts,function(part){if(part.match(baseTestReg)){base+=part.replace(baseReg,"$1");return false}return undefined})}if(!("tag" in baseInfo)){var queryIndex=src.lastIndexOf("?");if(queryIndex!==-1){var query=src.substring(queryIndex+1);baseInfo.tag=Utils.getHash(TIMESTAMP+query)}}baseInfo.base=baseInfo.base||base;return baseInfo}function getBaseInfo(){var scripts=doc.getElementsByTagName("script"),i,info;for(i=scripts.length-1;i>=0;i--){if((info=getBaseInfoFromOneScript(scripts[i]))){return info}}S.log("must load kissy by file name in browser environment: seed.js or seed-min.js","error");return null}S.config({comboPrefix:defaultComboPrefix,comboSep:defaultComboSep,charset:"utf-8",lang:"zh-cn",tag:TIMESTAMP});if(S.UA.nodejs){S.config({charset:"utf-8",base:__dirname.replace(/\\/g,"/").replace(/\/$/,"")+"/"})}else{if(doc&&doc.getElementsByTagName){S.config(S.mix({comboMaxUrlLength:2000,comboMaxFileNum:40},getBaseInfo()))}}})(KISSY);KISSY.add("i18n",{alias:function(S,name){return name+"/i18n/"+S.Config.lang
}});(function(S,undefined){var logger=S.getLogger("s/web");var win=S.Env.host,UA=S.UA,doc=win.document,docElem=doc&&doc.documentElement,location=win.location,EMPTY="",domReady=0,callbacks=[],POLL_RETIRES=500,POLL_INTERVAL=40,RE_ID_STR=/^#?([\w-]+)$/,RE_NOT_WHITESPACE=/\S/,standardEventModel=!!(doc&&doc.addEventListener),DOM_READY_EVENT="DOMContentLoaded",READY_STATE_CHANGE_EVENT="readystatechange",LOAD_EVENT="load",COMPLETE="complete",addEventListener=standardEventModel?function(el,type,fn){el.addEventListener(type,fn,false)}:function(el,type,fn){el.attachEvent("on"+type,fn)},removeEventListener=standardEventModel?function(el,type,fn){el.removeEventListener(type,fn,false)}:function(el,type,fn){el.detachEvent("on"+type,fn)};S.mix(S,{isWindow:function(obj){return obj!=null&&obj==obj.window},parseXML:function(data){if(data.documentElement){return data}var xml;try{if(win.DOMParser){xml=new DOMParser().parseFromString(data,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async=false;xml.loadXML(data)}}catch(e){logger.error("parseXML error :");logger.error(e);xml=undefined}if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length){S.error("Invalid XML: "+data)}return xml},globalEval:function(data){if(data&&RE_NOT_WHITESPACE.test(data)){if(win.execScript){win.execScript(data)}else{(function(data){win.eval.call(win,data)})(data)}}},ready:function(fn){if(domReady){try{fn(S)}catch(e){S.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}else{callbacks.push(fn)}return this},available:function(id,fn){id=(id+EMPTY).match(RE_ID_STR)[1];var retryCount=1;var timer=S.later(function(){if(++retryCount>POLL_RETIRES){timer.cancel();return}var node=doc.getElementById(id);if(node){fn(node);timer.cancel()}},POLL_INTERVAL,true)}});function fireReady(){if(domReady){return}if(doc&&!UA.nodejs){removeEventListener(win,LOAD_EVENT,fireReady)}domReady=1;for(var i=0;i<callbacks.length;i++){try{callbacks[i](S)}catch(e){S.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}}function bindReady(){if(!doc||doc.readyState===COMPLETE){fireReady();return}addEventListener(win,LOAD_EVENT,fireReady);if(standardEventModel){var domReady=function(){removeEventListener(doc,DOM_READY_EVENT,domReady);fireReady()};addEventListener(doc,DOM_READY_EVENT,domReady)}else{var stateChange=function(){if(doc.readyState===COMPLETE){removeEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);fireReady()}};addEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);var notframe,doScroll=docElem&&docElem.doScroll;try{notframe=(win.frameElement===null)}catch(e){notframe=false}if(doScroll&&notframe){var readyScroll=function(){try{doScroll("left");fireReady()}catch(ex){setTimeout(readyScroll,POLL_INTERVAL)}};readyScroll()}}}if(location&&(location.search||EMPTY).indexOf("ks-debug")!==-1){S.Config.debug=true}bindReady();if(UA.ie){try{doc.execCommand("BackgroundImageCache",false,true)}catch(e){}}})(KISSY,undefined);(function(S){S.config({modules:{core:{alias:["dom","event","io","anim","base","node","json","ua","cookie"]},ajax:{alias:"io"},"rich-base":{alias:"base"}}});if(typeof location!=="undefined"){var https=S.startsWith(location.href,"https");var prefix=https?"https://s.tbcdn.cn/s/kissy/":"http://a.tbcdn.cn/s/kissy/";S.config({packages:{gallery:{base:prefix},mobile:{base:prefix}}})}})(KISSY);(function(config,Features,UA){config({"anim/transition?":{alias:KISSY.Features.isTransitionSupported()?"anim/transition":""}});config({"anim":{requires:["anim/base","anim/timer","anim/transition?"]}});config({"anim/base":{requires:["dom","promise"]}});config({"anim/timer":{requires:["dom","anim/base"]}});config({"anim/transition":{requires:["dom","event/dom","anim/base"]}});config({"attribute":{requires:["event/custom"]}});config({"base":{requires:["attribute"]}});config({"button":{requires:["node","component/control"]}});config({"color":{requires:["attribute"]}});config({"combobox":{requires:["node","component/control","menu","attribute","io"]}});config({"component/container":{requires:["component/control","component/manager"]}});config({"component/control":{requires:["node","base","promise","component/manager","xtemplate/runtime"]}});config({"component/extension/align":{requires:["node"]}});config({"component/extension/content-render":{requires:["component/extension/content-xtpl"]}});config({"component/extension/delegate-children":{requires:["node","component/manager"]}});config({"component/plugin/drag":{requires:["dd"]}});config({"component/plugin/resize":{requires:["resizable"]}});config({"date/format":{requires:["date/gregorian","i18n!date"]}});config({"date/gregorian":{requires:["i18n!date"]}});config({"date/picker":{requires:["node","date/gregorian","i18n!date/picker","component/control","date/format"]}});config({"date/popup-picker":{requires:["date/picker/picker-xtpl","date/picker","component/extension/shim","component/extension/align"]}});config({"dd":{requires:["node","base"]}});config({"dd/plugin/constrain":{requires:["node","base"]}});
config({"dd/plugin/proxy":{requires:["node","dd","base"]}});config({"dd/plugin/scroll":{requires:["node","dd","base"]}});config({"dom/basic":{"alias":["dom/base",Features.isIELessThan(9)?"dom/ie":"",Features.isClassListSupported()?"":"dom/class-list"]},"dom":{"alias":["dom/basic",!Features.isQuerySelectorSupported()?"dom/selector":""]}});config({"dom/class-list":{requires:["dom/base"]}});config({"dom/ie":{requires:["dom/base"]}});config({"dom/selector":{requires:["dom/basic"]}});config({"editor":{requires:["node","html-parser","component/control"]}});config({"event":{requires:["event/dom","event/custom"]}});config({"event/custom":{requires:["event/base"]}});config({"event/dom":{"alias":["event/dom/base",Features.isTouchGestureSupported()?"event/dom/touch":"",Features.isDeviceMotionSupported()?"event/dom/shake":"",Features.isHashChangeSupported()?"":"event/dom/hashchange",Features.isIELessThan(9)?"event/dom/ie":"",UA.ie?"":"event/dom/focusin"]}});config({"event/dom/base":{requires:["event/base","dom"]}});config({"event/dom/focusin":{requires:["event/dom/base"]}});config({"event/dom/hashchange":{requires:["event/dom/base","dom"]}});config({"event/dom/ie":{requires:["event/dom/base","dom"]}});config({"event/dom/shake":{requires:["event/dom/base"]}});config({"event/dom/touch":{requires:["event/dom/base","dom"]}});config({"filter-menu":{requires:["menu","component/extension/content-xtpl","component/extension/content-render"]}});config({"io":{requires:["dom","event/custom","promise","event/dom"]}});config({"kison":{requires:["base"]}});config({"menu":{requires:["node","component/container","component/extension/delegate-children","component/control","component/extension/content-render","component/extension/content-xtpl","component/extension/align","component/extension/shim"]}});config({"menubutton":{requires:["node","button","component/extension/content-xtpl","component/extension/content-render","menu"]}});config({"mvc":{requires:["io","json","attribute","node"]}});config({"node":{requires:["dom","event/dom","anim"]}});config({"overlay":{requires:["component/container","component/extension/shim","component/extension/align","node","component/extension/content-xtpl","component/extension/content-render"]}});config({"resizable":{requires:["node","base","dd"]}});config({"resizable/plugin/proxy":{requires:["node","base"]}});config({"scroll-view":{alias:Features.isTouchGestureSupported()?"scroll-view/drag":"scroll-view/base"}});config({"scroll-view/base":{requires:["node","anim","component/container","component/extension/content-render"]}});config({"scroll-view/drag":{requires:["scroll-view/base","node","anim"]}});config({"scroll-view/plugin/pull-to-refresh":{requires:["base"]}});config({"scroll-view/plugin/scrollbar":{requires:["base","node","component/control"]}});config({"separator":{requires:["component/control"]}});config({"split-button":{requires:["component/container","button","menubutton"]}});config({"stylesheet":{requires:["dom"]}});config({"swf":{requires:["dom","json","attribute"]}});config({"tabs":{requires:["component/container","toolbar","button"]}});config({"toolbar":{requires:["component/container","component/extension/delegate-children","node"]}});config({"tree":{requires:["node","component/container","component/extension/content-xtpl","component/extension/content-render","component/extension/delegate-children"]}});config({"xtemplate":{requires:["xtemplate/runtime","xtemplate/compiler"]}});config({"xtemplate/compiler":{requires:["xtemplate/runtime"]}});config({"xtemplate/nodejs":{requires:["xtemplate"]}});config({"xtemplate/runtime":{requires:["path"]}})})(function(c){KISSY.config("modules",c)},KISSY.Features,KISSY.UA);(function(S){S.add("ua",function(){return S.UA});S.add("uri",function(){return S.Uri});S.add("path",function(){return S.Path});var UA=S.UA,Env=S.Env,win=Env.host,nativeJson=((UA.nodejs&&typeof global==="object")?global:win).JSON;if(UA.ieMode<9){nativeJson=null}if(nativeJson){S.add("json",function(){S.JSON=nativeJson;return nativeJson});S.parseJson=function(data){return nativeJson.parse(data)}}else{var INVALID_CHARS_REG=/^[\],:{}\s]*$/,INVALID_BRACES_REG=/(?:^|:|,)(?:\s*\[)+/g,INVALID_ESCAPES_REG=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,INVALID_TOKENS_REG=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;S.parseJson=function(data){if(data===null){return data}if(typeof data==="string"){data=S.trim(data);if(data){if(INVALID_CHARS_REG.test(data.replace(INVALID_ESCAPES_REG,"@").replace(INVALID_TOKENS_REG,"]").replace(INVALID_BRACES_REG,""))){return(new Function("return "+data))()}}}return S.error("Invalid Json: "+data)}}if(S.UA.nodejs){S.KISSY=S;module.exports=S}})(KISSY);